{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/gm830/OneDrive/Desktop/iNeuron/ecommerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/gm830/OneDrive/Desktop/iNeuron/ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/gm830/OneDrive/Desktop/iNeuron/ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import\"./Products.css\";import{useNavigate,useSearchParams}from'react-router-dom';import Loading from'../loading/Loading';import ProductItem from'../productsItem/ProductItem';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Products=function Products(_ref){var category=_ref.category;var navigate=useNavigate();var _useSearchParams=useSearchParams(),_useSearchParams2=_slicedToArray(_useSearchParams,1),searchParams=_useSearchParams2[0];var searchItem=searchParams.get('item');var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var fetchProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var data,response,_response,filteredData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoading(true);if(!category){_context.next=12;break;}_context.next=4;return fetch(\"https://fakestoreapi.com/products/category/\".concat(category));case 4:response=_context.sent;if(!response.ok){navigate(\"/error\");}_context.next=8;return response.json();case 8:data=_context.sent;setProducts(data);_context.next=20;break;case 12:_context.next=14;return fetch(\"https://fakestoreapi.com/products\");case 14:_response=_context.sent;if(!_response.ok){navigate(\"/error\");}_context.next=18;return _response.json();case 18:data=_context.sent;if(searchItem){filteredData=data.filter(function(item){return item.title.toLowerCase().includes(searchItem.toLowerCase());});setProducts(filteredData);}else{setProducts(data);}case 20:setLoading(false);case 21:case\"end\":return _context.stop();}},_callee);}));return function fetchProducts(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchProducts();},[category,searchItem]);return/*#__PURE__*/_jsx(\"div\",{className:\"py-3 py-md-5 bg-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4 capitalize\",children:category?category:\"Our Products\"})}),loading?/*#__PURE__*/_jsx(Loading,{}):products.length>0?products.map(function(product){return/*#__PURE__*/_jsx(ProductItem,{product:product},product.id);}):/*#__PURE__*/_jsx(\"div\",{className:\"noProduct\",children:\"No product found\"})]})})});};export default Products;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSearchParams","Loading","ProductItem","jsx","_jsx","jsxs","_jsxs","Products","_ref","category","navigate","_useSearchParams","_useSearchParams2","_slicedToArray","searchParams","searchItem","get","_useState","_useState2","products","setProducts","_useState3","_useState4","loading","setLoading","fetchProducts","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","response","_response","filteredData","wrap","_callee$","_context","prev","next","fetch","concat","sent","ok","json","filter","item","title","toLowerCase","includes","stop","apply","arguments","className","children","length","map","product","id"],"sources":["C:/Users/gm830/OneDrive/Desktop/iNeuron/ecommerce/src/components/products/Products.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport \"./Products.css\"\r\nimport { useNavigate, useSearchParams } from 'react-router-dom'\r\nimport Loading from '../loading/Loading'\r\nimport ProductItem from '../productsItem/ProductItem'\r\n\r\nconst Products = ({ category }) => {\r\n    const navigate = useNavigate()\r\n    const [searchParams] = useSearchParams()\r\n    const searchItem = searchParams.get('item')\r\n    const [products, setProducts] = useState([])\r\n    const [loading, setLoading] = useState(false)\r\n    const fetchProducts = async () => {\r\n        setLoading(true)\r\n        let data\r\n        if (category) {\r\n            const response = await fetch(`https://fakestoreapi.com/products/category/${category}`)\r\n            if (!response.ok) {\r\n                navigate(\"/error\")\r\n            }\r\n            data = await response.json()\r\n            setProducts(data)\r\n        }\r\n        else {\r\n            const response = await fetch(\"https://fakestoreapi.com/products\")\r\n            if (!response.ok) {\r\n                navigate(\"/error\")\r\n            }\r\n            data = await response.json()\r\n            if (searchItem) {\r\n                const filteredData = data.filter(item => item.title.toLowerCase().includes(searchItem.toLowerCase()))\r\n                setProducts(filteredData)\r\n            }\r\n            else {\r\n                setProducts(data)\r\n            }\r\n\r\n        }\r\n        setLoading(false)\r\n    }\r\n    useEffect(() => {\r\n        fetchProducts()\r\n    }, [category, searchItem])\r\n\r\n\r\n    return (\r\n        <div className=\"py-3 py-md-5 bg-light\">\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-md-12\">\r\n                        <h4 className=\"mb-4 capitalize\">{category ? category : \"Our Products\"}</h4>\r\n                    </div>\r\n                    {loading ? <Loading /> : products.length > 0 ? products.map(product => <ProductItem key={product.id} product={product} />) : <div className='noProduct'>No product found</div>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Products\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}